var loadJs=function(){var b=window.YY_DEBUG_MODE;var a=["core.js","base.js"];if(b){a=[]}loadScript(a,{fn:function(){var c=b?[]:["nav.js"];loadScript(c,{async:true});YY.util.imgLoadError()}})};$.Class("index.speech.title",{init:function(){},titleInit:function(){var a=[{txt:"发言",id:0,css:"icoFy"},{txt:"日程",id:1,css:"icoRc"},{txt:"任务",id:4,css:"ico_rw"},{txt:"日志",id:2,css:"ico_rz"},{txt:"投票",id:3,css:"ico_tp"}];if($("#fyd").html()==""){combo=new $.yy.comboDiv({fy:{defaultid:0,data:a,callback:function(b){switch(b){case"0":speechForm(b);break;case"1":scheduleForm(b);break;case"2":dailyForm(b);break;case"3":voteForm(b);break;case"4":taskForm(b);break}}},fyd:{defaultid:0,remote:yyBaseurl+"/api/info/mygroup/substr/18",format:function(c){var b=c.data,e=[];for(var d in b){e.push({title:b[d].group_name,txt:(b[d].labelTitle+(b[d].pub==1?"":'<span class="icoSuo"></span>')),id:b[d].gid})}return e},callback:function(g,f){$("#type_id,#groupid").val(g);var e=f.data;var d=null;for(var c=0,b=e.length;c<b;c++){var d=e[c];if(g==d.id){break}}if(d.title!=d.txt){$(".yy_speech_roam").hide()}else{$(".yy_speech_roam").show()}}}})}else{combo=new $.yy.comboDiv({fy:{defaultid:0,data:a,callback:function(b){switch(b){case"0":speechForm(b);break;case"1":scheduleForm(b);break;case"2":dailyForm(b);break;case"3":voteForm(b);break;case"4":taskForm(b);break}}}});$("li#fyd").css({"padding-left":"10px"})}}});$.Class("index.rightNav.main",{init:function(){this.type="index.rightNav.main";this.matterNum=1},loadCooperation:function(a){setTimeout(function(){loadScript(["lib/common/pageskip.js"],{fn:function(){var b=$.newInstance("lib.common.pageSkip",{url:YY.util.url("/space/ajax/index"),callback:function(d,k){var c=d.data.partner;var h=d.data.page;var l=YY.util.url("/images/default_avatar_small.gif");var m=yyBaseurl+"/space/cons/index/id/";var g="";for(var f=0,e=c.length;f<e;f++){g+='<li tips="1" class="relative" rel="'+YY.util.url("/api/ajax/partnerinfo/pid/")+c[f].member_id+'"><a class="vipHref" href="'+m+c[f].member_id+'" title="'+c[f].name+'"><img src="'+c[f].avatar+'" rel="'+l+'" /></a><i class="'+c[f].online+'"></i></li>'}$("#space_right_parter").show();$("#space_right_parter_page").empty();k.renderList(g)},pageSize:10,template:"#yy_page_cooperate"});b.render(function(c){$("#yy_mobile_down").before(c)});b.first()}})},15)},loadOthers:function(){YY.util.ajaxApi(yyBaseurl+"/space/ajax/info/substr/17",function(a){if($("#hot_topic").length>0){var d=a.data.topic;var j=yyBaseurl+"/topic/topic/convs/topic_id/";if(d.length>0){for(var c in d){$('<li><a href="'+j+d[c].id+'"><span class="icoHt"></span>'+d[c].title+"</a></li>").appendTo("#hot_topic")}}else{$("#hot_topic").closest("section").hide()}}if($("#new_member").length>0){var e=a.data.newmember;var g=yyBaseurl+"/space/cons/index/id/";var f=YY.util.url("/images/default_avatar_small.gif");if(e.length>0){for(var c in e){if(typeof e[c].member_id==="undefined"){continue}$('<li class="relative" tips="1"  rel= "'+yyBaseurl+"/api/ajax/partnerinfo/pid/"+e[c].member_id+'"><a class="vipHref" href="'+g+e[c].member_id+'">'+e[c].avatar+'</a><a href="'+g+e[c].member_id+'" class="dlMemtitle '+e[c].onlineclass+'">'+e[c].name+"</a></li>").appendTo("#new_member")}}else{$("#new_member").closest("section").hide()}}if($("#sysfeed_div").length>0){var h=a.data.system;var b=a.data.member;var g=yyBaseurl+"/space/cons/index/id/";var f=YY.util.url("/images/default_avatar_small.gif");if(h.length>0){for(var c in h){if(typeof b[h[c].member_id]==="undefined"){continue}$('<figure class="clearfix"><a href="'+g+h[c].member_id+'"><img src="'+b[h[c].member_id].avatar+'" title="'+b[h[c].member_id].old_name+'" rel="'+f+'" /> </a><figcaption>'+h[c].msg+"</figcaption></figure>").appendTo("#sysfeed_div")}}else{$("#sysfeed_div").closest("section").hide()}}},"POST","json")},initIndexCalendar:function(){setTimeout(function(){loadScript(["lib/common/pageskip.js"],{fn:function(){var a=$.newInstance("lib.common.pageSkip",{url:YY.util.url("/space/ajax/calendar"),callback:function(c,b){var g=c.data.calendarList;var f="";for(var e=0,d=g.length;e<d;e++){f+="<li><span>"+g[e].viewtitle+'：</span><a class="blueLink" href="'+g[e].title_link+'">'+g[e].title+"</a></li>"}b.renderList(f)},pageSize:5,template:"#yy_page_skip"});a.render(function(b){$("#yyMiniCalendar").closest("section").after(b)});a.first()}})},15)},getIndexCalendar:function(a){YY.util.ajaxApi(yyBaseurl+"/space/ajax/calendar/page/"+a,function(b){if($("#calendar_list").length>0){$("#calendar_list").empty();$("#calendar_page").empty();var e=b.data.calendarList;if(e.length>0){for(var c in e){$("<li><span>"+e[c].viewtitle+'：</span><a class="blueLink" href="'+e[c].title_link+'">'+e[c].title+"</a></li>").appendTo("#calendar_list")}}else{$("#calendar_list").closest("section").hide()}var d=b.data.page;if(e.length>0){$(d).appendTo("#calendar_page")}else{$("#calendar_page").closest("section").hide()}}},"POST","json")},bind:function(){$(".yy-group-more-submit").live("click",function(){})}});$.Class("index.pageControler",{init:function(){},pageInit:function(){var a=this;loadScript(["plugin/yy.jquery.plugin.js","plugin/fancybox/jquery.fancybox-1.3.4.pack.js","lib/jq/jquery.validate.js","lib/yy/yy.core.js","lib/conversation/content.js","modules/space/yy.space.title.js","modules/space/yy.space.speech.js"],{fn:function(){var c=$.newInstance("index.conversation.mian");c.load();c.aboutProcess();c.bind();c.barBind();var d=$.newInstance("index.rightNav.main");d.initIndexCalendar();d.loadCooperation(1);d.loadOthers();d.bind();a.getNotice();var b=YY_DEBUG_MODE?["modules/space/yy.bar.js","modules/common/yy.leftnav.js","modules/common/yy.right.index.js","modules/speech/yy.uploadready.js","modules/space/yy.asyncsubmit.js","modules/common/yy.notice.js","lib/yy.common.js"]:["nav.js"];setTimeout(function(){loadScript(b,{async:true})},30);$("a#showGroupadd").fancybox({modal:true,titleShow:false,width:680,height:500,speedIn:200,speedOut:200});a.initAd();a.quickHelpBind();a.showAddSpaceBox();YY.log("yes")}})},getNotice:function(){YY.util.ajaxApi(yyBaseurl+"/api/notice/getNoticeNums",function(a){$("#bar_msg_div").html(a)},"POST","html")},initAd:function(){YY.util.loadScript(["plugin/yyrotator/yy.rotator.js"],{fn:function(){var a=$("#bg_div");if(!!a.length){a.show();a.YYSlider({big_item:"a",nav_item:"li",show_num:1,width:578,delay:100,nav_flag:true,arrow_flag:false,auto_flag:true})}}})},quickHelpBind:function(){function c(i,k){$(document).scrollTop(0);$("body").attr("scroll","no");$("body").css("overflow-y","hidden");var h=$("body").height();var m=$("body").width()+16;var j=a(i);$("#fullbg").css({width:m,height:h,display:"block"});var n=j.split("|")[0]+"px";var l=j.split("|")[1]+"px";$("#"+i).css({top:n,left:l,display:"block"})}function a(m){var p=document.documentElement.scrollTop;var j=document.documentElement.scrollLeft;var h=document.documentElement.clientHeight;var l=document.documentElement.clientWidth;var k=$("#"+m).height();var n=$("#"+m).width();var o=Number(p)+(Number(h)-Number(k))/2;var i=Number(j)+(Number(l)-Number(n))/2;return o+"|"+i}function f(){var h=$("#fullbg").css("display");if(h=="block"){var l=$("body").height();var j=$("body").width()+16;$("#fullbg").css({width:j,height:l});var i=a("dialog");var m=i.split("|")[0]+"px";var k=i.split("|")[1]+"px";$("#dialog").css({top:m,left:k})}}function e(){if(d==2){$("#top_fabu_div").parent().addClass("z1");$("#top_fabu_div").removeAttr("style");$("#tmp_div").remove()}if(d==3){$("#group_div").parent().removeAttr("style")}if(d==4){$("#tmp_div").remove();$("#app_div").parent().removeAttr("style")}if(d==5){$("header.cirHeader").addClass("z13");$("#tmp_div").remove();$("#bar_msg_div").parent().parent().parent().addClass("relative");$("#bar_msg_div").parent().parent().parent().parent().addClass("relative");$("#bar_msg_div").removeAttr("style").addClass("fl").addClass("relative")}if(d==6){$("#tmp_div").remove();$("header.cirHeader").addClass("z13");$("#bar_msg_div").parent().parent().parent().addClass("relative");$("#bar_msg_div").parent().parent().parent().parent().addClass("relative");$("#myNet").trigger("mouseout").removeAttr("style").addClass("fl").addClass("relative")}$("#fullbg").css("display","none");$("#trans").css("display","none");$("#dialog").css("display","none");$("body").attr("scroll","yes");$("body").css("overflow-y","");$.get(yyBaseurl+"/space/ajax/ajaxSetQuickhelp",function(h){})}function g(){left=($("body").width()-980)/2;dtop=0;d=d+1;$("#dialog_content").html(d);if(d==1){$(document).scrollTop(dtop);$("#usebtn").removeClass("ydTy");left=($(window).width()-50)/2-$("#dialog").width()/2;dtop=$(window).height()/2-$("#dialog").height()/2;$("#dialog").css("top",dtop).css("left",left).removeClass("yd07").addClass("yd01")}if(d==2){$(document).scrollTop(dtop);dtop=260;left=($(window).width()-50)/2;$("#dialog").css("top",dtop+30).css("left",left-$("#dialog").width()/2).removeClass("yd01").addClass("yd02");height=$("#top_fabu_div").height()+52;width=$("#top_fabu_div").width();$("#top_fabu_div").parent().removeClass("z1");$("#top_fabu_div").css("position","absolute").css("z-index",21).css("width",width);$("#feed_div").before('<div id="tmp_div" style="height:'+height+'px;">&nbsp;</div>');$("#trans").css("display","block").css("background-color","white").css("width",$("body").width()).css("height",height+20).css("top",dtop-height-10).css("left",0);$("#content_div").trigger("click")}if(d==3){$(document).scrollTop(dtop);dtop=260;$("#top_fabu_div").parent().addClass("z1");$("#top_fabu_div").removeAttr("style");$("#tmp_div").remove();$("#group_div").parent().css("z-index",21).css("background-color","white").css("padding",10).css("border-radius",5);$("#group_div").parent().width(160);width=$("#group_div").parent().width();height=$("body").height();$("#trans").css("display","block").css("background-color","white").css("width",width+20).css("height",height).css("top",0).css("left",left);$("#dialog").css("top",dtop-70).css("left",left+20).removeClass("yd02").addClass("yd03")}if(d==4){dtop=260;$("#group_div").parent().removeAttr("style");width=$("#group_div").parent().width();height=$("#app_div").parent().height();$("#group_div").parent().after('<div id="tmp_div" class="relative" style="height:'+(height+20)+'px;">&nbsp;</div>');height=$("#group_div").parent().height();$(document).scrollTop(dtop+height-100);$("#dialog").css("top",dtop+height+100).css("left",left+width-30).removeClass("yd03").addClass("yd04");$("#app_div").parent().css("position","absolute").css("top",dtop+height).css("left",left).css("width",width-20).css("z-index",21).css("background-color","white").css("padding",10).css("border-radius",5);height=$("body").height();$("#trans").css("display","block").css("width",width+20).css("height",height).css("top",0).css("left",left)}if(d==5){dtop=0;$(document).scrollTop(dtop);$("#tmp_div").remove();$("#app_div").parent().removeAttr("style");$("header.z13").removeClass("z13");width=$("#bar_msg_div").width();height=$("#bar_msg_div").height();isadmin=$("#fullbg").attr("for");if(isadmin==1){$("#bar_msg_div").parent().width(260);left_msg=710;left_dialog=440}else{$("#bar_msg_div").parent().width(200);left_msg=770;left_dialog=500}$("#bar_msg_div").parent().parent().parent().removeClass("relative");$("#bar_msg_div").parent().parent().parent().parent().removeClass("relative");$("#bar_msg_div").removeClass("fl").removeClass("relative").css("position","absolute").css("background-color","white").css("z-index",21).css("padding",10).css("border-radius",5).css("left",left+left_msg);$(".icoXiaoxi").parent().after('<div id="tmp_div" class="fl relative" style="width:'+(width+20)+'px;">&nbsp;</div>');$("#trans").css("display","block").css("width",$("body").width()).css("height",height+20).css("top",dtop+10).css("left",0);$("#dialog").css("top",dtop+height+10).css("left",left+left_dialog).removeClass("yd04").addClass("yd05")}if(d==6){dtop=0;$(document).scrollTop(dtop);$("#tmp_div").remove();$("#bar_msg_div").parent().removeAttr("style");$("#bar_msg_div").removeAttr("style").addClass("fl").addClass("relative");$("#myNet").removeClass("fl").removeClass("relative").css("position","absolute").css("z-index",21).trigger("mouseover").css("left",left+840);$("#bar_msg_div").parent().append('<div id="tmp_div" class="fl relative" style="width:'+80+'px;">&nbsp;</div>');width=$("#aside_myNet").width();height=$("#myNet").height();height=height+$("#aside_myNet").height();$("#trans").css("display","block").css("width",width+100).css("height",$("body").height()).css("top",0).css("left",left+715);$("#dialog").css("top",100).css("left",left+270).removeClass("yd05").addClass("yd06")}if(d==7){$(document).scrollTop(0);$("#tmp_div").remove();$("#myNet").trigger("mouseout").removeAttr("style").addClass("fl").addClass("relative");$("#bar_msg_div").parent().parent().parent().addClass("relative");$("#bar_msg_div").parent().parent().parent().parent().addClass("relative");$("header.cirHeader").addClass("z13");left=$(window).width()/2-$("#dialog").width()/2;dtop=$(window).height()/2-$("#dialog").height()/2;$("#dialog").css("top",dtop).css("left",left).removeClass("yd06").addClass("yd07");$("#usebtn").addClass("ydTy");$("#nextbtn").attr("title","再看一遍")}if(d==b){d=0}}var b=7;var d=1;$("#closebtn").live("click",function(){e()});$("#nextbtn").live("click",function(){g()});$("#usebtn").live("click",function(){e()});if($("#dialog").attr("for")==1){c("dialog","dialog_content")}},showAddSpaceBox:function(){if($("#myNet").attr("data")){$.fancybox({modal:true,href:yyBaseurl+"/space/ajax/addspacebox",showCloseButton:false,centerOnScroll:true,onComplete:function(){$(".yy-addSpaceBtn").click(function(){window.location.href=$(this).attr("data")});$(".yy-noRemind").click(function(){document.cookie="showAddSpaceBox=1"})}})}}});$(function(){var a=$.newInstance("index.pageControler");a.pageInit()});