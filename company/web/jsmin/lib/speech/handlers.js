var disappearTime=1000;function fileQueued(c){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setStatus("Pending...");a.toggleCancel(true,this)}catch(b){this.debug(b)}}function fileQueueError(c,e,d){try{if(e===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){alert("You have attempted to queue too many files.\n"+(d===0?"You have reached the upload limit.":"You may select "+(d>1?"up to "+d+" files.":"one file.")));return}var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);switch(e){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:alert("文件过大!，请上传小于"+this.settings.file_size_limit+"的文件");a.setStatus("File is too big.");this.debug("Error Code: File too big, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:a.setStatus("Cannot upload Zero Byte files.");this.debug("Error Code: Zero byte file, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:a.setStatus("Invalid File Type.");this.debug("Error Code: Invalid File Type, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;default:if(c!==null){a.setStatus("Unhandled Error")}this.debug("Error Code: "+e+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}}function fileDialogComplete(a,c){try{this.startUpload()}catch(b){this.debug(b)}}function uploadStart(c){try{var d=$("#"+this.movieName).closest("form");$(d).find("#divUploadBar").show();$(d).find("#uploadBar").css("width","0%");var a=new FileProgress(c);a.setStatus("Uploading...");a.toggleCancel(true,this)}catch(b){}return true}function uploadProgress(c,f,e){try{var d=Math.ceil((f/e)*100);var g=$("#"+this.movieName).closest("form");$(g).find("#uploadBar").css("width",d+"%");var a=new FileProgress(c,this.customSettings.progressTarget);a.setProgress(d);a.setStatus("Uploading...")}catch(b){this.debug(b)}}function uploadSuccess(file,serverData){try{var progress=new FileProgress(file,this.customSettings.progressTarget);progress.setComplete();progress.setStatus("Complete.");progress.toggleCancel(false);var obj=$("#"+this.movieName).closest("form");$(obj).find("#divUploadBar").fadeOut(disappearTime);var dataObj=eval("("+serverData+")");createFileContainer(dataObj[0],dataObj[1],dataObj[2],this.movieName)}catch(ex){this.debug(ex)}}function uploadError(c,f,d){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);var e=$("#"+this.movieName).closest("form");$(e).find("#divUploadBar").fadeOut(disappearTime);switch(f){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:a.setStatus("Upload Error: "+d);this.debug("Error Code: HTTP Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:a.setStatus("Upload Failed.");this.debug("Error Code: Upload Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:a.setStatus("Server (IO) Error");this.debug("Error Code: IO Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:a.setStatus("Security Error");this.debug("Error Code: Security Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:a.setStatus("Upload limit exceeded.");this.debug("Error Code: Upload Limit Exceeded, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:a.setStatus("Failed Validation.  Upload skipped.");this.debug("Error Code: File Validation Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}a.setStatus("Cancelled");a.setCancelled();break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:a.setStatus("Stopped");break;default:a.setStatus("Unhandled Error: "+f);this.debug("Error Code: "+f+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}}function uploadComplete(a){if(this.getStats().files_queued===0){}}function queueComplete(a){}function createFileContainer(f,c,b,g){var e=$("#"+g).closest("form");var d=$(e).find("#fileContainer");d.fadeIn(disappearTime);var a=$('<li class="clearfix" id="_file'+f+'"></li>');a.html("<span>"+c+'(<font id="_fileconvert'+f+'">转换中……</font>)</span> <a href="javascript:;" class="fr" onclick="delThisFile('+f+", '"+g+"');\">×</a>");a.appendTo(d);changeFileIds(f,"+",$(e).find("#fids"));$.get(yyBaseurl+"/file/act/convert/fvid/"+b,function(h){var j=$("#"+g).closest("form");if(h==1){$(j).find("#_fileconvert"+f).html("已完成")}else{if(h==2){$(j).find("#_fileconvert"+f).html("此格式不支持转换")}else{$(j).find("#_fileconvert"+f).html("转换失败")}}})}function delThisFile(c,d){var a=$("#"+d).closest("form").find("#_file"+c),b=$("#"+d).closest("form").find("#fids");a.fadeOut(disappearTime,function(){a.remove();changeFileIds(c,"-",b)})}function changeFileIds(g,b,e){if(!g){return}if(e=="undefined"||e==null){var e=$("#fids")}var c=e.val();if(b=="-"){if(c){var f=c.split(",");var a=[];var d=f.length;for(i=0;i<d;i++){if(f[i]!=g){a[i]=f[i]}}e.val(a.join(","))}}else{if(b=="+"){if(c==""){e.val(c+g)}else{e.val(c+","+g)}}}};