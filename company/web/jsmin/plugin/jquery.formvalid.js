(function(a){a.formValid={setting:{tipContainer:".yy-tips",normalContainer:".yy-form-line"},partterns:{qz_name:/^[a-zA-Z0-9_\u4E00-\u9FA5().]+$/i,qz_shortname:/^[a-zA-Z0-9_\u4E00-\u9FA5.]+$/i,username:/^[a-zA-Z0-9_\u4E00-\u9FA5]+$/i,email:/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+$/i,name:/^[a-z\u4E00-\u9FA5]+$/i,tel:/^[0-9]+$/,mobile:/^(\+86-?)?1[3458]\d{9}$/},lengthRange:{qz_name:[4,20],qz_shortname:[1,20],username:[2,20],name:[2,20],password:[6,16],duty:[2,10]},defaultMsg:{qz_name:"须同营业执照一致。",qz_shortname:"请输入公司简称",username:"由中文、英文、数字及下划线组成，2-20位字符，注册成功不可修改",email:"请输入你的常用邮箱，用来登录、找回密码、接收通知等",password:"6-16位字符（字符、数字、符号），区分大小写",password2:"请再输入一次密码",name:"请输入真实的中文或英文姓名",duty:"请输入公司职务",tel:"请输入办公电话号码",mobile:"请输入手机号码"},errorMsg:{required:{qz_name:"请输入公司全称",qz_shortname:"请输入公司简称",username:"请输入用户名",email:"请输入邮箱",password:"请输入密码",password2:"请输入确认密码",name:"请输入真实姓名",duty:"请输入公司职务",tel:"请输入办公电话",agreement:"您还没有选择接受使用协议"},rel_both_required:{},rel_required:{},regex:{qz_name:"用户名由中文、英文、数字、小括号及下划线组成，4-20位字符",qz_shortname:"用户名由中文、英文、数字及下划线组成，1-20位字符",username:"用户名由中文、英文、数字及下划线组成，2-20位字符",email:"邮箱格式不对，请重新输入",name:"请输入真实的中文或英文姓名",mobile:"手机号格式错误，请重新输入",tel:"电话号码格式不对，请重新输入"},rel_both_regex:{},length:{qz_name:"用户名长度只能在4-20位字符之间",qz_shortname:"用户名长度只能在1-20位字符之间",username:"用户名长度只能在2-20位字符之间",name:"真实姓名长度在2-20位字符之间",password:"密码在6-16位字符之间",duty:"公司职务在2-10位字符之间"},compare:{password2:["password","两次输入的密码不一致"]}}};a.fn.extend({formValid:function(d){var c=a(this);switch(d){case"tips":var h=arguments.length>1?arguments[1]:"";return b(h);break;case"valid":var f=arguments.length>1?arguments[1]:null,g=arguments.length>2?arguments[2]:true;return e(f,g);break}function b(){var k=arguments.length?arguments[0]:"";if(!k){var j=c.attr("name").replace(/_prefix/,"").replace(/_suffix/,"");k=a.formValid.defaultMsg[j]}c.closest(a.formValid.setting.normalContainer).find(a.formValid.setting.tipContainer).eq(0).removeClass("yy-tips-error").html(k)}function i(l){var j=0;for(var k=0;k<l.length;k++){var m=l.charCodeAt(k);if((m>=1&&m<=126)||(65376<=m&&m<=65439)){j++}else{j++}}return j}function e(l,m){var k={minlength:function(o,n){return i(o)>=n?true:false},maxlength:function(o,n){return i(o)>n?false:true},elementvalid:function(x,u){if(!x.length){return null}var s=x.closest(a.formValid.setting.normalContainer).find(a.formValid.setting.tipContainer).eq(0),n=x.attr("name"),o=a.trim(x.val()),p="",v=0,q=0;if(x.attr("type")==="checkbox"){if(typeof a.formValid.errorMsg.required[n]!=="undefined"){var y=false;a('[name="'+n+'"]').each(function(C){if(a(this).attr("checked")){y=true;return false}});p=y?"":a.formValid.errorMsg.required[n];y?s.html('<i class="yy-icon-ok"></i>'):(++q&&(u?s.addClass("yy-tips-error").show().html(p):""));return q}return}if(typeof a.formValid.errorMsg.compare[n]!=="undefined"){var t=a.formValid.errorMsg.compare[n][0];if(o!==a.trim(a('[name="'+t+'"]').val())){p=a.formValid.errorMsg.compare[n][1];v=1}}var A=(typeof a.formValid.errorMsg.required[n]!=="undefined");if(A&&!v){if(o.length){if(typeof a.formValid.errorMsg.rel_both_required[n]!=="undefined"){var z=a('[name="'+a.formValid.errorMsg.rel_both_required[n][0]+'"]');if(!a.trim(z.val())){p=a.formValid.errorMsg.rel_both_required[n][1];v=1}}}else{if(typeof a.formValid.errorMsg.rel_required[n]!=="undefined"){var r=(typeof a.formValid.errorMsg.rel_required[n][0]==="string")?[a.formValid.errorMsg.rel_required[n][0]]:a.formValid.errorMsg.rel_required[n][0];a.each(r,function(C,E){var D=a('[name="'+E+'"]');if(!a.trim(D.val())){p=a.formValid.errorMsg.rel_required[n][1];v=1;return false}})}else{p=a.formValid.errorMsg.required[n];v=1}}}if((typeof a.formValid.errorMsg.length[n]!=="undefined")&&!v){if(o.length&&(!k.minlength(o,a.formValid.lengthRange[n][0])||!k.maxlength(o,a.formValid.lengthRange[n][1]))){p=a.formValid.errorMsg.length[n];v=1}}if((typeof a.formValid.errorMsg.regex[n]!=="undefined")&&!v){if(o.length){if(a.formValid.partterns[n].test(o)){if(typeof a.formValid.errorMsg.rel_both_regex[n]!=="undefined"){var B=a.formValid.errorMsg.rel_both_regex[n][0],z=a('[name="'+B+'"]'),w=a.trim(z.val());if(!a.formValid.partterns[B].test(w)){p=a.formValid.errorMsg.rel_both_regex[n][1];v=1}}}else{p=a.formValid.errorMsg.regex[n];v=1}}else{if(typeof a.formValid.errorMsg.rel_both_regex[n]!=="undefined"){var B=a.formValid.errorMsg.rel_both_regex[n][0],z=a('[name="'+B+'"]'),w=a.trim(z.val());if(w.length){p=a.formValid.errorMsg.rel_both_regex[n][1];v=1}}}}v?(++q&&(u?(s.addClass("yy-tips-error").show().html(p)&&(a("#tip_username").hasClass("yy-tips-error")?a("#s_tip_username").html(""):"")):"")):(s.find(".yy-icon-ok").length?"":s.append('<i class="yy-icon-ok"></i>'));return q}};if(l===null){return k.elementvalid(c,m)?false:true}else{var j=0;a.each(l,function(p,q){if(typeof q.name!=="undefined"){var o=a('[name="'+q.name+'"]');if(k.elementvalid(o,m)){j++}}});return j?false:true}}}})})(jQuery);