var YYNet=function(){var a=this;a.init=function(){$("#netlistTable").live("click",function(c){var b=$(c.target);if(b.hasClass("yy-net-link")){YY.util.ajaxApi(b.attr("href"),function(f){if(!f.rs){return false}var e=b.closest("td");if(f.type=="leave"){e.html("");$('<a class="yy-net-link button blueGz" href="'+YY.util.url("/space/net/join/id/"+f.data.id)+'">立即加入</a>').appendTo(e)}else{if(f.type=="join"){if(f.data.status>0){e.html("");$('<div class="groupSet"><span class="buttonBox"><a href="###" class="c3Link icoBluer">已加入</a> | <a class="yy-net-link blueLink " href="'+YY.util.url("/space/net/leave/id/"+f.data.id)+'"}">退出</a></span></div>').appendTo(e)}else{e.html('<a class="button grayGz" href="###">审核中</a>')}}}return false},"POST","json");return false}})};a.publicQzOp=function(){$("#publicQz").live("click",function(c){var b=$(c.target);if(b.hasClass("yy-net-link")){YY.util.ajaxApi(b.attr("href"),function(f){if(!f.rs){return false}var e=b.closest("p.publicOp");if(f.type=="leave"){e.html("");$('<a class="yy-net-link button blueGz" href="'+YY.util.url("/space/net/join/id/"+f.data.id)+'">立即加入</a>').appendTo(e)}else{if(f.type=="join"){if(f.data.status>0){e.html("");$('<div class="groupSet"><span class="buttonBox"><a href="###" class="c3Link icoBluer">已加入</a> | <a class="yy-net-link blueLink " href="'+YY.util.url("/space/net/leave/id/"+f.data.id)+'"}">退出</a></span></div>').appendTo(e)}else{e.html('<a class="button grayGz" href="###">审核中</a>')}}}return false},"POST","json");return false}})}};var yySpace=function(){var a=this;a.init=function(){$(".yySpaceJoin").live("click",function(){var b=$(this);YY.util.ajaxApi(yyBaseurl+"/space/space/joinqz",function(g){if(g.rs){var e=$(b).closest("td.yySpaceOp");$(e).html("");var f='<aside class="fr groupSet relative"><span class="buttonBox"><a href="#" class="c3Link icoBluer">已加入</a> | <a data="'+b.attr("data")+'" class="yySpaceQuit" href="#">退出</a></span>';if(b.attr("data-type")==2){f+='<aside class="delTk hidden">确定要退出该空间？<br><a class="yySpaceQuitConfirm" href="#" data="'+b.attr("data")+'">退出</a><a class="yySpaceQuitCancel" href="#">不退出</a><span class="sj xsj"></span></aside>'}else{f+='<aside class="delTk delTk2 hidden">抱歉，该空间属于行政空间，您不可以退出<span class="sj xsj"></span></aside></aside>'}$(f).appendTo($(e))}else{var c=b.next();c.removeClass("hidden");setTimeout(function(){c.addClass("hidden")},"2000")}},"post","json","qzid="+$(this).attr("data"));return false});$(".yySpaceQuit").live("click",function(){if($(this).attr("data")==2){$(this).closest(".groupSet").find(".delTk").removeClass("hidden")}else{var b=$(this).closest(".groupSet").find(".delTk");b.removeClass("hidden");setTimeout(function(){b.addClass("hidden")},"2000")}return false});$(".yySpaceQuitConfirm").live("click",function(){var b=$(this);YY.util.ajaxApi(yyBaseurl+"/space/ajax/leaveqz",function(e){if(e.rs){var c=$(b).closest("td.yySpaceOp");$(c).html("");$('<a class="yySpaceJoin button blueGz" href="#" data="'+$(b).attr("data")+'">立即加入</a>').appendTo($(c))}},"post","json","qzid="+$(this).attr("data"));$(this).closest(".delTk").addClass("hidden");return false});$(".yySpaceQuitCancel").live("click",function(){$(this).closest(".delTk").addClass("hidden");return false});$("a[class^='edit_']").hide();$(".plus1,.plus2,.plus3").live("click",function(){var b=$(this).prevAll("img").length+2;FunToggle($(this),1,3,yyBaseurl+"/space/space/ajaxspace","CompanyDeep_"+b)});$(".minus1,.minus2,.minus3").live("click",function(){FunToggle($(this),0,3,yyBaseurl+"/space/space/ajaxspace",null)});$("div.treeHovera").live("mouseover mouseout",function(b){if(b.type=="mouseover"){$(this).addClass("blueBg treeHoverLink");$(this).find("a[class^='edit_']").show()}else{$(this).removeClass("blueBg treeHoverLink");$(this).find("a[class^='edit_']").hide()}});$(".linkfocus").live("click",function(){YY.util.ajaxApi(yyBaseurl+"/space/space/getsubspace",function(b){$(".duoc_company_list").html(b)},"post","html",{sid:$(this).attr("data")})});$(".ajaxPage a").live("click",function(){url=$(this).attr("href");if(url){YY.util.ajaxApi(url,function(b){$(".duoc_company_list").html(b)},"post","html")}return false})}};$(document).ready(function(){var a=new YYNet();a.init();a.publicQzOp();var b=new yySpace();b.init()});