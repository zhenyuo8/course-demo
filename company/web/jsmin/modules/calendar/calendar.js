$(document).ready(function(){var b="";var i="";var h=$("#mycal").jFrontierCal({date:new Date(),dayClickCallback:g,agendaClickCallback:k,agendaDropCallback:e,agendaMouseoverCallback:c,applyAgendaTooltipCallback:a,agendaDragStartCallback:j,agendaDragStopCallback:d,dragAndDropEnabled:true}).data("plugin");f();function f(){h.ajaxGetDate("#mycal",yyBaseurl+"/calendar/index/ajaxget/","json")}function j(l,m,n){if(m.data("qtip")){m.qtip("destroy")}}function d(l,m,n){}function a(p,s){if(p.data("qtip")){p.qtip("destroy")}var m="";var u=s.title;var n=s.startDate;var q=s.endDate;var w=s.allDay;var o=s.data;m+="<br><b>"+u+"</b><br><br>";if(w){m+="(All day event)<br><br>"}else{m+="<b>Starts:</b> "+n+"<br><b>Ends:</b> "+q+"<br><br>"}for(var r in o){m+="<b>"+r+":</b> "+o[r]+"<br>"}var v=s.displayProp.backgroundColor;var t=s.displayProp.foregroundColor;var l={border:{width:5,radius:10},padding:10,textAlign:"left",tip:true,name:"dark"};if(v!=null&&v!=""){l.backgroundColor=v}if(t!=null&&t!=""){l.color=t}p.qtip({content:m,position:{corner:{tooltip:"bottomMiddle",target:"topMiddle"},adjust:{mouse:true,x:0,y:-15},target:"mouse"},show:{when:{event:"mouseover"}},style:l})}h.setAspectRatio("#mycal",0.75);function g(m){var l=m.data.calDayDate;b=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()}function k(m){var l=m.data.agendaId;var n=h.getAgendaItemById("#mycal",l);i=n}function e(n){var m=n.data.agendaId;var l=n.data.calDayDate;var o=h.getAgendaItemById("#mycal",m);alert("You dropped agenda item "+o.title+" onto "+l.toString()+". Here is where you can make an AJAX call to update your database.")}function c(m){var l=m.data.agendaId;var n=h.getAgendaItemById("#mycal",l)}$("#BtnPreviousMonth").button();$("#BtnPreviousMonth").click(function(){h.showPreviousMonth("#mycal");var n=h.getCurrentDate("#mycal");var m=n.getFullYear();var o=n.getMonth();var l=n.getDate();$("#dateSelect").datepicker("setDate",m+"-"+(o+1)+"-"+l);return false});$("#BtnNextMonth").button();$("#BtnNextMonth").click(function(){h.showNextMonth("#mycal");var n=h.getCurrentDate("#mycal");var m=n.getFullYear();var o=n.getMonth();var l=n.getDate();$("#dateSelect").datepicker("setDate",m+"-"+(o+1)+"-"+l);return false});$("#BtnDeleteAll").button();$("#BtnDeleteAll").click(function(){h.deleteAllAgendaItems("#mycal");return false});$("#dateSelect").datepicker({changeMonth:true,changeYear:true,prevText:"上月",nextText:"下月",dateFormat:"yy-mm-dd"});$.datepicker.setDefaults()});