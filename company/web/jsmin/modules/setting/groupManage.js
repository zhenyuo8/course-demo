jQuery.validator.addMethod("checkLength",function(e,d,f){var g=0,a=e.length,b=-1;for(var c=0;c<a;c++){b=e.charCodeAt(c);if(b>=0&&b<=128){g+=1}else{g+=2}}if(g>f){return false}return true},"长度超过200字");var settingGroupManage=function(){var a=this;a.init=function(){$("input.groupCheckAll").live("click",function(){if($(this).attr("checked")=="checked"){$("input.gids").attr("checked","checked")}else{$("input.gids").removeAttr("checked")}});$("#group_logo").change(function(){onUploadImgChange(this,"groupLogo")});$("input.groupDelAll").bind("click",function(){$(this).closest("form").attr("action",yyBaseurl+"/setting/group/del").submit()});$("a.groupEdit").live("click",function(){var b=$(this);$.fancybox({modal:true,href:$(b).attr("href"),onComplete:function(){var c=new settingGroupManage();c.init();setTimeout(function(){if($("ul.tkBox").length>0){var d=30+$("ul.tkBox").height();$("ul.tkBox").css({top:"-"+d+"px",position:"absolute","z-index":"999"})}},"100")}});return false});$("#createGroupForm").validate({validClass:"icoRightt",errorClass:"icoWrongtk",errorBg:"yellowBg",hasIco:false,rules:{group_name:{required:true,remote:{url:yyBaseurl+"/group/create/checkgroupname/",type:"GET",dataType:"json",data:{group_name:function(){return encodeURIComponent($("#group_name").val())},gid:function(){return $("#gid").val()},rid:function(){return Math.random()}}}},group_logo:{required:function(){return $("img#preview").length>0?true:false}},description:{required:true,checkLength:"200"}},messages:{group_name:{required:"请输入群组名",remote:"此群组名已存在"},group_logo:{required:"请上传群组封面"},description:{required:"请输入群组简介"}}});$.yy.defaultText({addGroupAdmin:"添加管理员",addGroupMember:"添加群组成员"});$("#addGroupAdmin").yyautocomplete({appendTo:"#addGroupAdmin_div",ajaxUrl:url("/common/search/ccnotice/?limit=7"),selAppendTo:"#addGroupAdmin_list",select:function(b,c){}});$("#addGroupMember").yyautocomplete({appendTo:"#addGroupMember_div",ajaxUrl:url("/common/search/ccnotice/?limit=7"),selAppendTo:"#addGroupMember_list",select:function(b,c){}});$(".resetBtn").bind("click",function(){$(".rcAddmenListli").remove()})}};$(document).ready(function(){var a=new settingGroupManage();a.init()});