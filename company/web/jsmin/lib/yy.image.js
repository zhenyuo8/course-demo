(function(c,a,b){a=a||{};a.Image=function(f){var k=this;var d=c(f),m={"0":[1,0,0,1],"1":[0,-1,1,0],"2":[-1,0,0,-1],"3":[0,1,-1,0]},h=c.browser,e=h.msie&&h.version==9,i=0,g=[0,0],l=[0,0],j=document.createElement("CANVAS");c(j).hide();d.after(j);k.rotate=function(r){r=i+r;r=(4+r)%4;i=r;var p=d[0];var t=k.fixedImgSize(r,g[0],g[1],l[0],l[1]);var o=t.width,u=t.height;if(e||!h.msie){var q=j,s=q&&q.getContext("2d");q&&c(q).css({width:o,height:u}).attr({width:o,height:u});switch(r){case 0:s.drawImage(p,0,0,o,u);break;case 1:s.rotate(270*Math.PI/180);s.drawImage(p,-u,0,u,o);break;case 2:s.rotate(180*Math.PI/180);s.drawImage(p,-o,-u,o,u);break;case 3:s.rotate(90*Math.PI/180);s.drawImage(p,0,-o,u,o);break}d.hide();c(j).show()}else{var n=m[r];p.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+n[0]+",M21="+n[1]+",M12="+n[2]+",M22="+n[3]+', sizingmethod="auto expand")';if(r%2===0){d.css({width:o,height:u})}else{d.css({width:u,height:o})}}};k.resetStatus=function(){i=0};k.setOrigSize=function(q,n){if(!q||!n){var p=d.attr("src"),o=new Image();o.src=p;q=o.width;n=o.height}g[0]=q;g[1]=n};k.setMaxSize=function(o,n){l[0]=o;l[1]=n};k.fixedImgSize=function(q,n,p,v,s){var o,u;if(q%2===0){o=n;u=p}else{o=p;u=n}v=+v;s=+s;if(o>v||u>s){if(v>0&&s>0){var t=o/v,r=u/s;if(t>r){o=v;u=u/t}else{o=o/r;u=s}}else{if(!(v>0)&&s>0){var r=u/s;o=o/r;u=s}else{if(v>0&&!(s>0)){var t=o/v;o=v;u=u/t}}}}return{width:o,height:u}}}}(jQuery,YY,YY.util));