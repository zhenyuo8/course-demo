var htmlcontent=new Array();for(var i=0;i<5;i++){htmlcontent[i]=""}htmlcontent[0]=$("#changeDiv").html();var commonJsList_space=["lib/jq/jquery-ui-1.8.18.custom.min.js","lib/i18n/jquery.ui.datepicker-zh-CN.js","lib/yy/yy.autocomplete.js"];function speechForm(b){$(".ya_talkInputNum").show();if(htmlcontent[b]==""){YY.util.ajaxApi(yyBaseurl+"/speech/index/form",function(c){$("#changeDiv").html("");$(c).appendTo("#changeDiv");htmlcontent[b]=c;loadUploadCtr();editorObj.resetDom($("#speechForm"));editorObj.setFocus();editorObj.rememberCurrentRange();$("#content_div").trigger("click")},"POST","html")}else{$("#changeDiv").html("");var a=htmlcontent[b];$(a).appendTo("#changeDiv");editorObj.resetDom($("#speechForm"));editorObj.setFocus();editorObj.rememberCurrentRange();if($("#fyd[data!=-1]").length>0){return}setTimeout(function(){combo=new $.yy.comboDiv1({label_fyd:{defaultid:0,remote:yyBaseurl+"/api/info/mygroup/substr/18",format:function(e){var c=e.data,g=[];for(var f in c){g.push({title:c[f].group_name,txt:(c[f].labelTitle+(c[f].pub==1?"":'<span class="icoSuo"></span>')),id:c[f].gid})}return g},callback:function(k,h){$("#type_id,#groupid").val(k);var g=h.data;var f=null;for(var e=0,c=g.length;e<c;e++){var f=g[e];if(k==f.id){break}}if(f.title!=f.txt){$(".yy_speech_roam").hide()}else{$(".yy_speech_roam").show()}}}})},15)}}function scheduleForm(a){$(".ya_talkInputNum").hide();if(htmlcontent[a]==""){YY.util.ajaxApi(yyBaseurl+"/schedule/index/form",function(b){$("#changeDiv").html("");$(b).appendTo("#changeDiv");htmlcontent[a]=b;var c=["modules/schedule/yy.schedule.js","modules/schedule/yy.index.js"];if(commonJsList_space.length>0){c=$.merge(commonJsList_space,c);commonJsList_space=[]}YY.util.loadScript(c);loadUploadCtr()},"POST","html")}else{$("#changeDiv").html("");$(htmlcontent[a]).appendTo("#changeDiv");s.init();s.defaultText();s.load();s.listen();s.showButton();loadUploadCtr()}$("#addForm").live("submit",function(){$("div[id=topic_warp]").hide();$("#type").val("1");$("#type_id").val(combo.val("fyd"));$("#groupid").val($("#fyd").attr("data")<0?combo.val("fyd"):$("#fyd").attr("data"))})}function taskForm(a){$(".ya_talkInputNum").hide();if(htmlcontent[a]==""){YY.util.ajaxApi(yyBaseurl+"/task/task/form",function(b){$("#changeDiv").html("");$(b).appendTo("#changeDiv");htmlcontent[a]=b;var c=["modules/task/yy.task.js"];if(commonJsList_space.length>0){c=$.merge(commonJsList_space,c);commonJsList_space=[]}YY.util.loadScript(c);loadUploadCtr()},"POST","html")}else{$("#changeDiv").html("");$(htmlcontent[a]).appendTo("#changeDiv");t.init();t.load();t.listen();t.showButton();loadUploadCtr()}$("#taskaddForm").live("submit",function(){$("div[id=topic_warp]").addClass("hidden");$("#type").val("1");$("#type_id").val(combo.val("fyd"));$("#groupid").val($("#fyd").attr("data")<0?combo.val("fyd"):$("#fyd").attr("data"))})}function dailyForm(a){$(".ya_talkInputNum").hide();if(htmlcontent[a]==""){YY.util.ajaxApi(yyBaseurl+"/daily/index/form",function(b){$("#changeDiv").html("");$(b).appendTo("#changeDiv");htmlcontent[a]=b;YY.util.loadScript(["modules/daily/yy.daily.js"]);loadUploadCtr()},"POST","html")}else{$("#changeDiv").html("");$(htmlcontent[a]).appendTo("#changeDiv");d.init();d.load();d.listen();loadUploadCtr()}$("#dailyAddForm").live("submit",function(){$("#type").val("1");$("#type_id").val(combo.val("fyd"));$("#groupid").val($("#fyd").attr("data")<0?combo.val("fyd"):$("#fyd").attr("data"))})}function voteForm(c){$(".ya_talkInputNum").hide();if(htmlcontent[c]==""){var b=$("#fyd[data!=-1]").attr("data"),a=$("#fyd[data!=-1]").html();YY.util.ajax({url:yyBaseurl+"/vote/vote/form",success:function(f){$("#changeDiv").html("");$(f).appendTo("#changeDiv");htmlcontent[c]=f;var e=["modules/vote/yy.vote.js","modules/vote/yy.vote.index.js"];if(commonJsList_space.length>0){e=$.merge(commonJsList_space,e);commonJsList_space=[]}YY.util.loadScript(e);loadUploadCtr()},type:"POST",dataType:"text",data:{gid:b,gname:a}})}else{$("#changeDiv").html("");$(htmlcontent[c]).appendTo("#changeDiv");loadUploadCtr();if($("#fyd").html()==""){combo=new $.yy.comboDiv({fyd:{defaultid:0,remote:yyBaseurl+"/api/info/mygroup/substr/18",format:function(f){var e=f.data,h=[];for(var g in e){h.push({title:e[g].group_name,txt:(e[g].labelTitle+(e[g].pub==1?"":'<span class="icoSuo"></span>')),id:e[g].gid})}return h},callback:function(e){$("#type_id,#groupid").val(e)}}});$("#type").val("1");$("#type_id").val(combo.val("fyd"));$("#groupid").val($("#fyd").attr("data")<0?combo.val("fyd"):$("#fyd").attr("data"))}else{$("li#fyd").css({"padding-left":"10px"})}}}function loadUploadCtr(){YY.util.initUpload(function(){new InitUpload({button_placeholder_id:"fileUploadLink",upload_url:YY.util.url("/file/act/swfupload/fileFrom/")+$("#fileFrom").val()+"/gid/"+$("#groupid").val()})})}var combo;var state={speech:false,schedule:false,vote:false,task:false};$(document).ready(function(){$("#yy_speeh_title").find("a").click(function(){var b=$(this),c=b.attr("id").split("_")[2];$("#yy_speeh_title i").remove();if(c!=3){b.after('<i class="ht_jt"></i>')}switch(c){case"0":speechForm(c);break;case"1":scheduleForm(c);break;case"2":dailyForm(c);break;case"3":voteForm(c);break;case"4":taskForm(c);break}});var a=[{txt:"发言",id:0,css:"icoFy"},{txt:"投票",id:3,css:"ico_tp"}];if($("#fyd[data!=-1]").length>0){return}if($("#fyd").html()==""){combo=new $.yy.comboDiv1({label_fyd:{defaultid:0,remote:yyBaseurl+"/api/info/mygroup/substr/18",format:function(c){var b=c.data,f=[];for(var e in b){f.push({title:b[e].group_name,txt:(b[e].labelTitle+(b[e].pub==1?"":'<span class="icoSuo"></span>')),id:b[e].gid})}return f},callback:function(h,g){$("#type_id,#groupid").val(h);var f=g.data;var e=null;for(var c=0,b=f.length;c<b;c++){var e=f[c];if(h==e.id){break}}if(e.title!=e.txt){$(".yy_speech_roam").hide()}else{$(".yy_speech_roam").show()}}}})}else{if($("#fyd").length>0){return}combo=new $.yy.comboDiv({fy:{defaultid:0,data:a,callback:function(b){switch(b){case"0":speechForm(b);break;case"3":voteForm(b);break}}},label_fyd:{defaultid:0,remote:yyBaseurl+"/api/info/mygroup/substr/18",format:function(c){var b=c.data,f=[];for(var e in b){f.push({title:b[e].group_name,txt:(b[e].labelTitle+(b[e].pub==1?"":'<span class="icoSuo"></span>')),id:b[e].gid})}return f},callback:function(h,g){$("#type_id,#groupid").val(h);var f=g.data;var e=null;for(var c=0,b=f.length;c<b;c++){var e=f[c];if(h==e.id){break}}if(e.title!=e.txt){$(".yy_speech_roam").hide()}else{$(".yy_speech_roam").show()}}}});$("li#fyd").css({"padding-left":"10px"})}YY.util.initUpload(function(){new InitUpload({button_placeholder_id:"spanButtonPlaceHolder",upload_url:YY.util.url("/file/act/swfupload/fileFrom/")+$("#fileFrom").val()+"/gid/"+$("#groupid").val()})})});