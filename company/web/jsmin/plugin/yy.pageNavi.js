(function(d,a,b){a=a||{};function c(e){var g=this;var f=c.prototype;if(typeof g.defaults==="undefined"){f.setParamData=function(h){g.paramData=h};f.getParamData=function(){return g.paramData};f.getCurPage=function(){return g.curPage};f.setCurPage=function(h){g.curPage=h};f.getPageCount=function(){return g.options.pageCount};f.setPageCount=function(h){g.options.pageCount=h};f.getPerPage=function(){return g.options.perPage};f.setPerPage=function(h){g.options.perPage=h};f.getTotalPage=function(){var i=g.getTotalNum(),h=g.getPerPage();g.totalPage=Math.ceil(i/h);return g.totalPage};f.getTotalNum=function(){return g.options.totalNum};f.setTotalNum=function(h){g.options.totalNum=h};f.concatHtml=function(){var t=g.options,h=t.nextBtn,m=t.prevBtn,o=t.pageBtn,q=t.firstBtn,k=t.lastBtn;count=g.getPageCount(),mid_count=Math.ceil(count/2),total=g.getTotalNum(),cur=g.getCurPage(),totalPage=g.getTotalPage();var l="<a>"+total+"</a>";if(totalPage>count){l+=(cur>mid_count)?'<a class="'+q+' first" href="javascript:;">1 ...</a>':""}l+=(cur===1)?"":'<a class="'+m+' pageLeft" href="javascript:;">上一页</a>';var r,s;if(cur<mid_count){r=cur-1;s=(totalPage>count)?(count-r-1):(totalPage-r-1)}else{if((cur+mid_count-1)>totalPage){s=totalPage-cur;r=(totalPage>count)?(count-s-1):(totalPage-s-1)}else{s=r=mid_count-1}}for(var p=r;p>0;p--){l+='<a class="'+o+'" href="javascript:;">'+(cur-p)+"</a>"}l+='<a class="'+o+' pCur" href="javascript:;">'+cur+"</a>";for(var n=1;n<=s;n++){l+='<a class="'+o+'" href="javascript:;">'+(cur+n)+"</a>"}l+=(cur===totalPage)?"":'<a class="'+h+' pageRight" href="javascript:;">下一页</a>';if(totalPage>count){l+=(count%2===0)?(cur<(totalPage-mid_count)?'<a class="'+k+' last" href="javascript:;">... '+totalPage+"</a>":""):(cur<=(totalPage-mid_count)?'<a class="'+k+' last" href="javascript:;">... '+totalPage+"</a>":"")}return l};f.getContentData=function(k){var j=g.options,i=j.remoteUrl,h=g.getParamData();h.page=g.getCurPage();h.num=g.getPerPage();b.ajaxApi(i,function(m,l){typeof k==="function"&&k(m)},"GET","json",h)};f.render=function(){var h=g.options,i=h.totalNum,j=i?g.concatHtml():"";d(h.pageLine).html(j);g.getContentData(h.contentLoaded)};f.bindEvent=function(){var h=g.options;d(h.pageLine).on({click:function(p){var k=d(p.target),r=null;var i=h.nextBtn,l=h.prevBtn,m=h.pageBtn,o=h.firstBtn,j=h.lastBtn;var q=g.getCurPage(),n=g.getTotalPage();if((r=k.closest(i)).length){if(q===n){return false}g.setCurPage(q+1);g.render()}if((r=k.closest(l)).length){if(q===1){return false}g.setCurPage(q-1);g.render()}if((r=k.closest(m)).length){g.setCurPage(r.text());g.render()}if((r=k.closest(o)).length){g.setCurPage(1);g.render()}if((r=k.closest(j)).length){g.setCurPage(n);g.render()}}})};f.defaults={page:1,perPage:15,pageCount:5,totalNum:0,isRender:true,pageLine:".yy-page-line",pageBtn:".yy-page",prevBtn:".yy-prev-page",nextBtn:".yy-next-page",firstBtn:".yy-first",lastBtn:".yy-last",remoteUrl:"",paramData:{},contentLoaded:function(h){}}}g.options=d.extend({},g.defaults,e);var e=g.options;g.setParamData(e.paramData);delete e.paramData;g.setCurPage(e.page);g.setPerPage(e.perPage);e.isRender&&g.render()}a.PageNavi=c}(jQuery,YY,YY.util));